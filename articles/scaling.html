<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="svglite">
<title>Scaling Issues • svglite</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.4/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.4/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Scaling Issues">
<meta property="og:description" content="svglite">
<meta property="og:image" content="https://svglite.r-lib.org/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="svglite.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">svglite</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/fonts.html">Specifying fonts</a>
    <a class="dropdown-item" href="../articles/scaling.html">Scaling Issues</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/02/svglite-2-0-0/">Version 2.0.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-lib/svglite/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Scaling Issues</h1>
            
            <h4 data-toc-skip class="date">2023-01-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/svglite/blob/HEAD/vignettes/scaling.Rmd" class="external-link"><code>vignettes/scaling.Rmd</code></a></small>
      <div class="d-none name"><code>scaling.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="scaling-svg-outputs">Scaling SVG outputs<a class="anchor" aria-label="anchor" href="#scaling-svg-outputs"></a>
</h2>
<p>The SVG files produced by svglite do not include <code>width</code>
and <code>height</code> properties. This is a deliberate choice intended
to make it easier to fit fluidly a SVG figure to its enclosing
container. The scaling straightforward but requires some understanding
of the <code>viewBox</code> SVG attribute which is included in all SVGs
produced by svglite. This property defines the aspect ratio of the plot
(as well as a <em>user coordinate system</em>, see next section).</p>
<div class="section level3">
<h3 id="fluid-scaling">Fluid scaling<a class="anchor" aria-label="anchor" href="#fluid-scaling"></a>
</h3>
<p>The viewBox is determined by the <code>width</code> and
<code>height</code> arguments of svglite’s device functions (with 10’’ x
8’’ the default). Although those dimensions are supplied in inches, the
viewBox’s user coordinate system is completely unit agnostic. The main
effect is thus to determine an aspect ratio. Since dimensions are not
provided, the dimensions of the enclosing container are used instead and
the SVG is rescaled to fit the container (although Internet Explorer
currently requires some CSS tricks to get this behaviour, see <a href="https://tympanus.net/codrops/2014/08/19/making-svgs-responsive-with-css/" class="external-link uri">https://tympanus.net/codrops/2014/08/19/making-svgs-responsive-with-css/</a>).</p>
<p>Aspect ratio is preserved by default when the figure is scaled up or
down. The details of how the aspect ratio is preserved can be adjusted
in multiple ways via the <code>preserveAspectRatio</code> attribute. See
<a href="https://www.sarasoueidan.com/blog/svg-coordinate-systems/" class="external-link uri">https://www.sarasoueidan.com/blog/svg-coordinate-systems/</a>
for more information about this property.</p>
<p>Other useful resource: <a href="https://css-tricks.com/scale-svg/" class="external-link uri">https://css-tricks.com/scale-svg/</a></p>
</div>
<div class="section level3">
<h3 id="natural-scaling">Natural scaling<a class="anchor" aria-label="anchor" href="#natural-scaling"></a>
</h3>
<p>Another strategy is needed in order to scale the figure to make the
text within the SVG consistent with the text in the surrounding web
page. That could be useful, for instance, to create a consistent
appearance in an HTML presentation. Since the user coordinate system
defined by the viewBox is unitless, we need to map the figure to its
natural dimensions. This will ensure a correspondence between the scale
of the figure and that of the web page.</p>
<p>As mentioned above, the natural scale of svglite’s figures is in
points and is determined by the <code>width</code> and
<code>height</code> arguments that you supply to the device functions
(10’’ x 8’’ being the default). Although those dimensions are specified
in inches, the coordinate system is scaled in points. Counting 72 points
per inch, the default SVG surface is thus 720 x 576 pt. Note that the
CSS standard defines 12pt to be equal to 16px, the default size of text
in most browsers. Since 12pt is the default text size in svglite as
well, a SVG scaled to its natural dimensions will appear seamless with
web text of 16px. If the text in your web page has another size, you
will have to compute a scale factor and adjust the dimensions of the SVG
accordingly.</p>
<p>To sum up, displaying a plot according to its natural dimensions
requires providing the user agent with information about what the
lengths defined within the SVG actually mean. There are several ways to
achieve this. First you can edit the SVG and enclose it in another pair
of <code>&lt;svg&gt;</code> tags that defines <code>height</code> and
<code>width</code>. The root <code>&lt;svg&gt;</code> element determines
the final dimensions of the figure.</p>
<p>A second way is to enclose the figure in a <code>&lt;div&gt;</code>
tag with appropriate dimensions and let the SVG figure rescale itself to
that container (cf. the section on fluid scaling):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">style</span><span class="ot">=</span><span class="st">"width: 720pt; height: 576pt"</span><span class="kw">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">"figure.svg"</span><span class="kw">&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>Finally, you can directly specify the dimensions in the
<code>&lt;img&gt;</code> or <code>&lt;object&gt;</code> tag that is
embedding the figure. Note that the dimension attributes of those tags
do not accept arbitrary units, so you will have to supply the dimensions
in pixels. Just multiply the width and height measured in points with a
factor of 16/12:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">"figure.svg"</span> <span class="er">width</span><span class="ot">=</span><span class="st">"960"</span> <span class="er">height</span><span class="ot">=</span><span class="st">"768"</span><span class="kw">&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="internal-notes">Internal notes<a class="anchor" aria-label="anchor" href="#internal-notes"></a>
</h2>
<div class="section level3">
<h3 id="device-scaling">Device scaling<a class="anchor" aria-label="anchor" href="#device-scaling"></a>
</h3>
<p>As other graphics devices, svglite is scaled in big points (1/72
inch) rather than pica points (1/72.27 inch). Note that in LaTeX and in
the <code>grid</code> graphics system on which ggplot2 is based, points
refer to pica points. Big points are denoted in LaTeX by <code>bp</code>
and in CSS by <code>pt</code>. We use the latter notation. See <a href="https://tex.stackexchange.com/a/200968/19755" class="external-link uri">https://tex.stackexchange.com/a/200968/19755</a> for some
historical background about these units.</p>
<p>The conversion between device units and physical dimensions is
determined by the DevDesc parameter <code>ipr</code>. IPR stands for
inches per raster (native device coordinates are sometimes called
rasters in R terminology) and is set to 1/72 in svglite. The device’s
physical dimensions are set by the following DevDesc parameters (with
<code>width</code> and <code>height</code> the plot dimensions set by
the user in inches):</p>
<table class="table">
<thead><tr class="header">
<th>Parameter</th>
<th>Value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>left</code></td>
<td><code>0</code></td>
</tr>
<tr class="even">
<td><code>top</code></td>
<td><code>0</code></td>
</tr>
<tr class="odd">
<td><code>right</code></td>
<td><code>width * 72</code></td>
</tr>
<tr class="even">
<td><code>bottom</code></td>
<td><code>height * 72</code></td>
</tr>
</tbody>
</table>
<p>A default svglite plot surface is thus 720 x 576 pt.</p>
</div>
<div class="section level3">
<h3 id="scaling-of-graphical-elements">Scaling of graphical elements<a class="anchor" aria-label="anchor" href="#scaling-of-graphical-elements"></a>
</h3>
<p>It is conventional for the fundamental line width
(<code>lwd = 1</code>) to correspond to a line width of 1/96 inch and
svglite obeys this convention. Also, like other R graphics devices,
svglite interprets all point sizes directly as big points (e.g. the
<code>ps</code> graphical parameter and the <code>fontsize</code>
argument of device functions). The default font size is 12pt.</p>
<p>Text metrics are computed by systemfonts, which uses freetype to
extract metrics for each glyph and calculate string dimensions from
that. Text metrics are calculated at 1000dpi based on
<code>cex * ps</code> font size.</p>
<p>The Base graphics system also makes use of the obscure
<code>cra</code> parameter and its relatives (<code>cin</code>,
<code>cxy</code>, and <code>csi</code>). <code>cra</code> serves as a
crude measure for a default character height and width for the default
fontsize provided when the device is called (12pt in svgilte). The main
effect of this parameter (more specifically, the height component) is to
change the relationship between the margin parameters
<code>mar</code>/<code>mai</code> and <code>oma</code>/<code>omi</code>.
The margins <code>mar</code> and <code>oma</code> are specified in line
units and character height is used as a measure of line spacing to
convert margins measured in lines to physical margins. As in other
devices, <code>cra[0]</code> is set to <code>0.9 * pointsize</code> and
<code>cra[1]</code> to <code>1.2 * pointsize</code>. These parameters
are completely unused in the Grid graphics system.</p>
</div>
<div class="section level3">
<h3 id="svg-output">SVG output<a class="anchor" aria-label="anchor" href="#svg-output"></a>
</h3>
<p>The SVG output sets up a viewBox (a user coordinate system) with
values scaled in big points.</p>
<p><strong>viewBox</strong>: The width and height are set to
<code>dd-&gt;right</code> and <code>dd-&gt;bottom</code> respectively
(these values are determined by the user-supplied figure
<code>width</code> and <code>height</code>).</p>
<p><strong>Line width</strong>: <code>1 lwd</code> should equal 1/96
inch. svglite gets values scaled in device coordinates (big points), so
the line width is multiplied by 72/96.</p>
<p><strong>Text</strong>: gdtools returns metrics scaled in big points
so no transformation is needed. We do need to add <code>px</code> units
to work around a rendering bug in Firefox. Note that when a viewBox is
set up, a pixel equals one unit in the user coordinate system and thus
actually represents a big point.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>, T Jake Luciani, Matthieu Decorde, Vaudor Lise, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer>
</body>
</html>
